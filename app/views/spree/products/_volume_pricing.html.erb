<% display_percent ||= false %>
<% if product.price > 0 and product.master.volume_prices.present? %>
  <div id="bulk-discount">
    <h6><%= Spree.t(:bulk_discount) %></h6>
    <table class="table">
    	<% product.master.volume_prices.each do |v| %>
      	<%= content_tag(:tr) do %>
        	<%= content_tag :td, (v.open_ended? ? v.range : "#{v.range.to_range.begin}â€“#{v.range.to_range.end}") %>
        	<%= content_tag :td, Spree::Money.new(v.amount).to_s %>
        	<%= content_tag(:td, '%i%' % ((1.0 - v.amount / product.master.price) * 100.0).round) if display_percent %>
      	<% end %>
    	<% end %>
    </table>
  </div>
<% end %>

<% product.variants.each do |v| %>
  <% if v.volume_prices.present? %>
    <div class="variant-table-prices" id="variant-table-<%= v.id  %>" style="display:none">
      <h6><%= Spree.t(:bulk_discount) %> para <b> <%= variant_options v %></b> </h6>
      <table class="table">
        <% v.volume_prices.each do |p| %>
          <%= content_tag(:tr) do %>
            <%= content_tag :td, (p.open_ended? ? p.range : "#{p.range.to_range.begin}â€“#{p.range.to_range.end}") %>
              <%= content_tag :td, Spree::Money.new(p.amount).to_s %>
              <%= content_tag(:td, '%i%' % ((1.0 - p.amount / v.master.price) * 100.0).round) if display_percent %>
            <% end %>
          <% end %>
      </table>
    </div>
  <% end %>
<% end %>
